=====0.52=====
13.10.2010\\
  * Добавлено перенаправление пользователя на страницу провайдера при получении личного сообщения. Опция $conf{MSGS_UNREAD_FORWARD}. [[abills:docs:msgs:ru|Msgs]] 
  * Добавлена платёжная система Liqpay [[abills:docs:modules:paysys:ru#Liqpay|Liqpay]]
  * Добавлена функция индивидуальных шаблонов для разных типов оплат [[abills:docs:docs:ru#%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2|Docs]]
28.09.2010\\
  * Добавлена возможность выставлять приоритет денежных счетов (главный, дополнительный) при тарификации по трафику

MySQL:\\

  ALTER TABLE tarif_plans ADD COLUMN `bills_priority` tinyint(5) unsigned NOT NULL DEFAULT '0';

27.09.2010\\
  * Улучшен модуль работы с бонусами.
  * Добавлена возможность не снимать абон. плату при изменении тарифа в интерфейсе администратора
MySQL:\\

  CREATE TABLE `bonus_log` (
    `date` datetime NOT NULL default '0000-00-00 00:00:00',
    `sum` double(10,2) NOT NULL default '0.00',
    `dsc` varchar(80) default NULL,
    `ip` int(11) unsigned NOT NULL default '0',
    `last_deposit` double(15,6) NOT NULL default '0.000000',
    `uid` int(11) unsigned NOT NULL default '0',
    `aid` smallint(6) unsigned NOT NULL default '0',
    `id` int(11) unsigned NOT NULL auto_increment,
    `method` tinyint(4) unsigned NOT NULL default '0',
    `ext_id` varchar(28) NOT NULL default '',
    `bill_id` int(11) unsigned NOT NULL default '0',
    `inner_describe` varchar(80) NOT NULL default '',
    `action_type` tinyint(11) unsigned NOT NULL default '0',
    `expire` date NOT NULL default '0000-00-00',
    PRIMARY KEY  (`id`),
    UNIQUE KEY `id` (`id`),
    KEY `date` (`date`),
    KEY `uid` (`uid`)
  ) COMMENT "Bonus log"  ;

22.09.2010\\
  * Доработан механизм опроса для сообщений
MySQL: \\
  ALTER TABLE `msgs_survey_answers` ADD COLUMN `msg_id` int(11) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE `msgs_survey_answers` ADD COLUMN  `reply_id` int(11) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE `msgs_survey_answers` DROP PRIMARY KEY, ADD PRIMARY KEY(`uid`, `msg_id`, `reply_id`, `question_id`);

20.09.2010\\
MySQL: \\
  ALTER TABLE dhcphosts_leases ADD COLUMN `port` smallint(6) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE dhcphosts_leases ADD COLUMN `vlan` smallint(6) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE dhcphosts_leases ADD COLUMN `switch_mac` varchar(17) NOT NULL DEFAULT '';

14.09.2010\\
  * Добавлены новые поля  в журнал адресов **квартир в доме**, в журнал администраторов **адрес**, **мобильный телефон**, **день рождения**, **ИНН**, **паспорт**\\
MySQL: \\
  ALTER TABLE `builds` ADD COLUMN `flats` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE `admins` ADD COLUMN `address` VARCHAR(60) NOT NULL DEFAULT '';
  ALTER TABLE `admins` ADD COLUMN `cell_phone` varchar(20) NOT NULL DEFAULT '';
  ALTER TABLE `admins` ADD COLUMN `pasport_num` varchar(16) NOT NULL default '';
  ALTER TABLE `admins` ADD COLUMN `pasport_date` date NOT NULL default '0000-00-00';
  ALTER TABLE `admins` ADD COLUMN `pasport_grant` varchar(100) NOT NULL default '';
  ALTER TABLE `admins` ADD COLUMN `inn` varchar(20) NOT NULL default '';
  ALTER TABLE `admins` ADD COLUMN `birthday` DATE NOT NULL default '0000-00-00';

   
06.09.2010 \\
  * Добавлена возможность запускать внешние программы при само регистрации абонентов
  * Добавлена возможность отключать корпоративным пользователям возможность перевода средств между аккаунтами
  * Добавлена возможность повторно снимать активационный платёж для аккаунтом с слишком большим периодом не активности абонента
19.08.2010 \\
  * В заявку на подключения добавлено поле желаемая дата подключения
MySQL: \\
  ALTER TABLE msgs_unreg_requests ADD COLUMN `connection_time` DATETIME NOT NULL;

18.08.2010 \\
  * Добавлена функция "оплатить до"  в модуль [[abills:docs:modules:dv:ru|Dv]]
  * Добавлена функция контроля скорости для Linux  серверов доступа
15.08.2010 \\
  * Более гибкие тарифные планы для продавцов карточек

MySQL:\\
  ALTER TABLE `dillers_tps` ADD COLUMN `nas_tp` tinyint(1) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE `dillers_tps` ADD COLUMN `gid` int(11) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE `dillers_tps` ADD COLUMN `comments` text NOT NULL;
  ALTER TABLE `dillers_tps` ADD COLUMN `bonus_cards` int(11) unsigned NOT NULL DEFAULT '0';
  
  CREATE TABLE `multidoms_nas_tps` (
    `nas_id` smallint(6) unsigned NOT NULL,
    `domain_id` smallint(6) unsigned NOT NULL DEFAULT '0',
    `tp_id` smallint(6) unsigned NOT NULL,
    `datetime` datetime NOT NULL,
    `bonus_cards` int(11) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`domain_id`,`tp_id`,`nas_id`)
  ) COMMENT='Multidoms Dillers NAS TPS. For postpaid cards fees';


11.08.2010 \\
  * Добавлена возможность вести опросы пользователей в модуле Тех. Поддержки (Msgs)

MySQL:\\
  CREATE TABLE `msgs_survey_questions` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `survey_id` smallint(6) unsigned NOT NULL DEFAULT 0,
    `num` tinyint(4) unsigned NOT NULL DEFAULT '0',
    `question` varchar(200) NOT NULL,
    `params` varchar(250) NOT NULL,
    `comments` text NOT NULL,
    `user_comments` tinyint(1) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`)
  )  COMMENT 'Messages Survey questions';
  
  CREATE TABLE `msgs_survey_subjects` (
    `id` smallint(6) unsigned NOT NULL AUTO_INCREMENT,
    `name` varchar(20) NOT NULL,
    `comments` text NOT NULL,
    `aid` smallint(6) unsigned NOT NULL DEFAULT '0',
    `created` datetime NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`),
    UNIQUE KEY `name` (`name`)
  ) COMMENT 'Messages Survey Subjects';
  
  CREATE TABLE `msgs_survey_answers` (
    `question_id` int(11) unsigned NOT NULL DEFAULT '0',
    `uid` int(11) unsigned NOT NULL DEFAULT '0',
    `answer` tinyint(4) unsigned NOT NULL DEFAULT '0',
    `comments` text NOT NULL,
    `date_time` datetime NOT NULL,
    `survey_id` smallint(6) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`uid`,`question_id`)
  )   COMMENT 'Messages Survey Answers';


09.08.2010 \\
  * Добавлено поле описания тарифного плана. Изменён вид выбора тарифного плана для клиентов

MySQL:\\
  ALTER TABLE tarif_plans ADD COLUMN comments text not null default '';
  ALTER TABLE msgs_messages ADD COLUMN `survey_id` smallint(6) unsigned NOT NULL DEFAULT 0;
  ALTER TABLE msgs_reply ADD COLUMN `survey_id` smallint(6) unsigned NOT NULL DEFAULT 0;


02.08.2010 \\
  * Добавлена возможность одновременно использовать минимальную наработку и месячную абонплату
  * Добавлена возможность выставлять приоритет снятия денег в модуле Abon

MySQL:
  ALTER TABLE abon_tariffs  ADD COLUMN `priority` tinyint(1) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE abon_tariffs  ADD COLUMN   `account` tinyint(1) unsigned NOT NULL DEFAULT '0';


28.07.2010\\

  * Добавлена работа модуля Paysys c  мультидоменной платформой (Multidoms). **Обязательно обновите все модули Paysys  перед обновлением системы.**

MySQL:

  ALTER TABLE `config` CHANGE COLUMN `param` `param` varchar(30) NOT NULL default '';
  ALTER TABLE `config` ADD COLUMN `domain_id` smallint(6) unsigned not null default '0';
  ALTER TABLE `config` DROP KEY `param`;
  ALTER TABLE `config` ADD UNIQUE KEY `param` (`domain_id`, `param`);
  ALTER TABLE `paysys_log` ADD COLUMN `domain_id` smallint(6) unsigned not null default '0';
  ALTER TABLE `paysys_log` ADD COLUMN `status` tinyint(2) unsigned not null default '0';
  ALTER TABLE `paysys_log` DROP KEY `ps_transaction_id`;
  ALTER TABLE `paysys_log` ADD UNIQUE KEY `ps_transaction_id` (`domain_id`, `transaction_id`);
25.07.2010
  * Добавлена подача клиентами заявок  на подключения через веб интерфейс
MySQL:

  ALTER TABLE users_pi ADD COLUMN `country_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE msgs_unreg_requests ADD COLUMN `country_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE msgs_unreg_requests ADD COLUMN `location_id` INTEGER(11) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE msgs_unreg_requests ADD COLUMN `company` VARCHAR(60)  NOT NULL DEFAULT '';

20.07.2010
  * Добавлена раздел активные сообщения куда попадают все не закрытые сообщения
  * Добавлена автоматическая активизация сервисов с "отключён за неуплату" и "недостаточно средств" сразу после внесение денег на счёт абонента
  * Добавлена возможность кросмодульная (во всех модуля после определённого действия) обработка сообщений
  * Добавлена рассылка на E-mail счетов после их создания
  * Добавлена возможность включения всех активных пользователей (с положительным депозитом) для модуля Ipn.
25.06.2010
  * Добавлены платёжные системы Ibox, OSMP QIWI
  * Добавлен перенос сообщений технической поддержки между разделами
  * Добавлено создание внутренних сообщений в ответах администраторов для внутренних комментариев
  * Добавлена рассылка сообщений всем администраторам подписанным на тему, при создании и темы и при работе с ней 
MySQL:\\
  ALTER TABLE `msgs_reply` add COLUMN  `inner_msg` tinyint(1) unsigned NOT NULL default '0';


16.06.2010
  * Добавленная возможность создавать сети  и подсети для DHCP

MySQL:\\
  ALTER TABLE dhcphosts_networks ADD COLUMN `net_parent` smallint(5) unsigned NOT NULL DEFAULT '0';

=====0.51=====
22.05.2010 \\
  * Добавлена платёжная система Liberty Reserver
  * Добавлена возможность получать платёжные выписки через E-mail и FTP.
  * Добавлена возможность писать скрипты для программы billd (/libexec/billd)
  * Добавлена возможность устанавливать кредит абоненту в зависимости от последних оплат.
  * Доработан шейпер с IPFW таблицами
03.05.2010\\
  * Добавлен журнал адресов
MySQL:
  ALTER TABLE users_pi ADD COLUMN `location_id` INTEGER(11) UNSIGNED NOT NULL default '0';
  INSERT INTO districts (name) VALUES ('Main District');
  
  CREATE TABLE `builds` (
    `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    `street_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0',
    `number` VARCHAR(10)  NOT NULL DEFAULT '',
    `flors` TINYINT(4) UNSIGNED NOT NULL DEFAULT '0',
    `entrances` TINYINT(4) UNSIGNED NOT NULL DEFAULT '0',
    `added` DATE NOT NULL,
    `map_x` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0',
    `map_y` INTEGER(11) UNSIGNED NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`),
    UNIQUE KEY `street_id` (`street_id`, `number`)
  ) COMMENT='Builds';
  
29.04.2010\\
  * Добавленна возможность перевода средств между аккаунтами абонентов
  * Добавленна дата изминения класов трафика
MySQL:\\
  ALTER TABLE traffic_classes ADD COLUMN `changed` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00';


09.04.2010\\
  * В тарифных планах дилера появилась возможность снимать деньги после активации карточек.
  * Обновлён модуль Ashield (Dr.Web)

01.04.2010\\
MySQL:\\
  ALTER TABLE users_pi CHANGE phone phone varchar(30) not null default '';
    CREATE TABLE `districts` (
      `id` SMALLINT(6) UNSIGNED NOT NULL AUTO_INCREMENT,
      `name` VARCHAR(100) NOT NULL DEFAULT '',
      `country` TINYINT(4) UNSIGNED NOT NULL,
      `zip` VARCHAR(7) NOT NULL DEFAULT '',
      `city` VARCHAR(30) NOT NULL DEFAULT '',
      `comments` TEXT NOT NULL,
     PRIMARY KEY (`id`),
     UNIQUE KEY `id` (`id`),
     UNIQUE KEY `name` (`name`),
     UNIQUE KEY `name_2` (`name`)
   ) COMMENT='Locations districts';  


31.03.2010\\
  * Массовая печать документов найденных через поиск
  * Добавлена возможность контролировать вводимые пользователями символы пароля
  * Добавлен Армянский словарь
  * Добавлены платёжные системы 4PAY, EasySoft.
  * Добавлена возможность перенаправлять пользователей на пользовательский портал после отправки им сообщения администратором.

16.03.2010\\
  * Расширенно поле Filter-Id учётной записи пользователя. Добавлено возможность вводить в него дополнительные RADIUS пары.\\

MySQL:\\
  ALTER TABLE dv_main CHANGE COLUMN filter_id filter_id varchar(150) NOT NULL default '';

  * Добавлена  Платёжная система АИС ЕРИП (Беларусия) 

06.03.2010\\
  * Добавлена дата окончания скидки для клиента\\
  * Добавлено уведомления что пользователь онлайн в аккаунте пользователя
MySQL\\
  ALTER TABLE users ADD COLUMN reduction_date date not null default '0000-00-00';

22.02.2010\\
  *  Добавленна возможность создавать независимые шаблоны бухгалтерских документов для груп пользователей.\\
При создании шаблона нужно указать суффиксом номер группы (Docs_docs_account**_GID**.tpl).
MySQL:
  ALTER TABLE groups ADD COLUMN `separate_docs` tinyint(1) unsigned not null default 0;

18.02.2010\\
  * Добавленна возможность при недостаточности средств на счету переводить пользователей автоматически на другой тариф. Действует только для месячной абон. платы.
  * Добавленна возможность авто. активации блокированных за недостатком средств на счету
MySQL:
  ALTER TABLE tarif_plans CHANGE COLUMN `small_deposit_block` `small_deposit_action` smallint(6) NOT NULL default '0';

01.02.2010\\
  * Лог скидывания пользователя с линии вынесен в журнал изменений
 
01.02.2010\\
  * Добавлено поле комментарии для расписания. 
  * Улучшена визуализация журнала расписаний. Выделение красным не выполненых расписаний.
  * Добавлена опция блокирующая аккаунт если недостаточно средств для снятия месячной абонплаты.
  * Лог ведения неучтённого трафика вынесен в базу (/Reports/ Ipn/ Unknown IPs)

MySQL\\

  ALTER TABLE `shedule` ADD COLUMN `comments` varchar(120) NOT NULL default '';
  ALTER TABLE `tarif_plans` ADD COLUMN `small_deposit_block` tinyint(1) NOT NULL DEFAULT '0';
  CREATE TABLE `ipn_unknow_ips` (
  `src_ip` INTEGER(11) UNSIGNED NOT NULL DEFAULT '0',
  `dst_ip` INTEGER(11) UNSIGNED NOT NULL,
  `size` INTEGER(11) UNSIGNED NOT NULL,
  `nas_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0',
  `datetime` DATETIME NOT NULL
  ) COMMENT='Ipn unknow ips';  
  
30.01.2010\\
  * В фетчер сетей добавлена возможность поднимать статические рауты на нужные интерфейсы.
  * Добавлена программа выявления несанкционированных PPPoE  серверов.

29.01.2010\\
  * Добавлена возможность выбора группы тарифных планов при регистрации
  * Обновлён экспорт налоговых до версии OPZ 1.27

26.01.2010\\
  * Добавлена возможность просмотра лога DHCP сервера из админ интерфейса с привязкой к пользователям\\
MySQL:
  CREATE TABLE `dhcphosts_log` (
   `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
   `datetime` DATETIME NOT NULL,
   `hostname` VARCHAR(20) NOT NULL DEFAULT '',
   `message_type` TINYINT(2) UNSIGNED NOT NULL DEFAULT '0',
   `message` VARCHAR(90) NOT NULL DEFAULT '',
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`)
  ) COMMENT='Dhcphosts log'; 
  CREATE TABLE `streets` (
    `id` SMALLINT(6) UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `district_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`),
    UNIQUE KEY `name` (`name`),
    UNIQUE KEY `name_district` (`name`, `district_id`),
    UNIQUE KEY `name_2` (`name`)
  ) COMMENT='Locations streets';


20.01.2010\\
  * Добавлена проверка на дублирование комутатора и порта для Option 82.
  * Для услуги "Приостановка сервиса" была добавлена настройка периода за который можно приостановить услугу. Например не чаще чем раз в 60 дней.
  * Доработана форма регистрации через веб пользователя через портал. Добавлена капча
  * Добавлена возможность регистрации для модуля Msgs.
11.01.2010\\
  * Изменён вид календаря для дат
  * Ввод даты в любом формате при поиске (22.11.2008,22/11/2008,22-11-2008, 2008-11-22)
  * Добавлен экспорт в программу "Податкова Звітність" (Украина) в модуле Docs.
  * Делегация сообщений к администраторам с высшей компетенцией доступа
  * Добавлена возможность заносить сообщение при создании в наряд работ и создавать наряды работ
  * Создавать сообщение при заведении клиента
  * Добавлена возможность пересчёта сессий в форме детализации сессии 
  * Доработано компенсация рассчитывается исходя из 31 дня, а из количества дней в месяце
  * Добавлен новый тип внесения средств на счёт **Компенсация**

MySQL:
  ALTER TABLE msgs_messages ADD COLUMN `deligation` TINYINT(4) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE msgs_admins ADD COLUMN `deligation_level` tinyint(4) unsigned NOT NULL default '0';
  ALTER TABLE s_detail ADD COLUMN `sum` double(14,6) NOT NULL default '0.000000';


24.12.2009\\

MySQL:
  alter table cards_users add column id int unsigned not null auto_increment PRIMARY KEY;

24.12.2009\\
  * Доработана работа шейпера с учётом выставленной маски. Выделение маски отличной от 255.255.255.255  цветом в веб интерфейсе.


=====0.50=====

  * Добавлен Приоритет тарифного плана. Если заполнено это поле и пользователь переходит с тарифного плана с большим приоритетом на ТП с меньшим приоритетом с него снимается сума указанная в поле «Сумма изменения тарифного плана». Если в обратном направлении сумма не снимается.
  * В меню смены тарифного плана пользователем теперь отображаются только те ТП для перехода на которые у пользователя хватает средств.
  * Добавлена система терминалов [[http://abills.net.ua/wiki/doku.php/abills:docs:modules:paysys:ru#non_stop|24 Non Stop]]
  * Добавлена возможность автоматической выписки счёта, кассового чека  при пополнении аккаунта пользователя.
  * Добавлена возможность формировать несколько типов договоров в зависимости от предоставляемых услуг.
  * В модуль Cards  добавлена возможность формирования карточек для печати в документ PDF, а также экспорт списков файлов уже сгенерированных карточек в формате CSV.
  * Добавлен комментарий при отключении пользовательского аккаунта
  * Возможность контролировать доступ к Vod  серверу. Возрастное ограничение просмотра фильмов и каналов.
  * VIRUS_ALERT В Ipn  анализатор добавлена опция отслеживания заражённые хосты.
  * Улучшен анализ трафика программой traffic2sql
  * Для модуля Iptv создана опция возрастного ценза на контент. Доступ только при знании Pin  кода.
  * Добавлена возможность выносить оплаты проведённые через Paysys  в отдельные типы.
MySQL:
   update paysys_log SET system_id=system_id+40;
   ALTER TABLE iptv_main ADD COLUMN `pin` BLOB NOT NULL;
   ALTER TABLE iptv_main ADD COLUMN `vod` tinyint(1) unsigned NOT NULL default '0';


  * Доработан модуль [[abills:docs:mdelivery:ru|Mdelivery]]. Добавлены фильтры по Тарифному плану, статусу и адресу абонентов. Создан список абонентов для отправки почты который можно корректировать после создания рассылки.
  * Добавлена возможность отправки E-mail сообщений с прикреплёнными файлами.

=====RC1=====

**В связи с множеством доработок в версии 0.5 при переходе обязательно нужно обновить все коммерческие модули, цена обновления 50%  от цены модуля**

  * Создан новый модуль [[abills:docs:modules:multidoms:ru:abills|Multidoms]]. Система управления мультидоменами, разрешающая независимо вести в одной биллинговой системе несколько провайдеров.
  * Добавлен интерфейс реселлера, с возможностью авторегистрации реселлеров.
  * Улучшен интерфейс дилера в карточном модуле. Доработаны отчёты продаж
  * Добавлены поля занесения физических адресов расположения серверов доступа  
  * Вынесены классы трафика в отдельную форму и доработан шейпер с учётом таблиц FreeBSD + ng_car. **При миграции нужно завести классы трафика в таблицу и повторно их выбрать в форме тарификации трафика**
  * Добавлена возможность учёта классов трафика для MPD5 через RADIUS  атрибуты
  * Добавлена возможность мониторинга нескольких баз данных, мониторинг состояния кластера
  * Добавлена возможность вести историю SQL  запросов в Sqlcmd
  * Добавлена возможность задавать несколько расписаний на изменение тарифных планов.
  * Добавлены поля максимальное количество трафика и времени для тарифного плана. Позволяет более гибко стоить тарифных планы для Hotspot систем.
  * Добавлено группирование NAS (серверов доступа).
  * Задание минимального размер пакета, который будет попадать в детализацию. Данная опция предохраняет от замусоривания базы $conf{IPN_DETAIL_MIN_SIZE}=1024;
  * Добавлено в компании информационное поле представитель
  * Добавлена привязка платежей к платёжным документам: счёт, счёт-фактура, кассовый ордер
  * Добавлена возможность автоконфигурации точек HotSpot с прошивкой на базе WRT
  * Добавлена возможность добавлять комментарии при назначении периодических платежей пользователям. Комментарии отображаются при снятии денег по периодическим платежам.
  * Добавлено отображение даты следующего периодического платежа
  * Добавлены временные интервалы к периодическим платежам: квартал, пол года
  * Добавлена возможность снимать деньги с дополнительного счёта
  * Добавлены возможность производить снятия как по фиксированным периодам: начало месяца, начало квартала начало года, так и по произвольным - через месяц после последнего снятия, через квартал, через полгода, через год
  * Добавлено в отчёты Extfin  возможность выбора статистики отдельно по юридическим или физическим пользователям.
  * В модуль Cards добавлена опция $conf{CARDS_BRUTE_CLEAN_PERIOD}=2; - количество дней через которое удаляется запись о неправильном вводе пин-кода. (По умолчанию 2 дня).
  * Доработана возможность изменения кредита с пользовательского интерфейса. Добавлена возможность задавать количество изменений в месяц.
  * Добавлена возможность задавать минимальное допустимое количество символов при поиске логинов администратором
  * Добавлена возможность ограничить количество значений отображаемых в списках администратором. Настраивается в веб интерфейсе администратора.
  * Добавлена возможность удалять Vlan.
  * Сделана возможность переинициализировать Vlan  на удалённых серверах доступа после их перезагрузки
  * Добавлена возможность задавать несколько MAC адресов пользователю.
  * Добавлена возможность авто. выбора следующего свободного статического адреса из пула для модуля Dv. Выбираются адреса только из пулов с флагом STATIC.
  * Добавлена возможность авто. выбора следующего свободного статического адреса для модуля Dhcphosts.
  * Создание актов оказания услуг. Автоматическое создание актов оказания услуг за прошедший период.
  * Разделение выписки счетов отдельно для юридических лиц и для физических.
  * Добавлена опция $conf{SNMPUTILS_BINDING_DEPOSIT}=0.	Количество средств на счету ниже которого не привязываетя пользователь к портам комутатора. Количество средств - Депозит + Кредит аккаунта пользователя. 
  * Новая опция $conf{DV_USER_SERVICE_HOLDUP}=1; 	 Приостановка действия сервиса пользователя из личного кабинета кабинета.   
  * Добавлен параметр $conf{LANGS} разрешающий добавлять собственные словари и работать только с нужными языками.

  ALTER TABLE users ADD column domain_id smallint(6) unsigned not null default 0;
  ALTER TABLE users DROP index id;
  ALTER TABLE users ADD UNIQUE KEY `id` (id, domain_id);
  
  ALTER TABLE groups ADD column `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE groups DROP index name;
  ALTER TABLE groups ADD UNIQUE KEY `name` (`domain_id`, `name`);
  
  
  ALTER TABLE companies ADD column `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE companies DROP index name;
  ALTER TABLE companies ADD UNIQUE KEY `name` (`domain_id`, `name`);
  
  ALTER TABLE tarif_plans ADD column `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE tarif_plans DROP KEY id;
  ALTER TABLE tarif_plans ADD UNIQUE  KEY `id` (`id`, `module`, `domain_id`);
  
  
  ALTER TABLE tarif_plans DROP KEY `name`;
  ALTER TABLE tarif_plans ADD UNIQUE KEY `name` (`name`, `domain_id`);
  
  ALTER TABLE admins ADD column `domain_id` smallint(6) unsigned not null default 0;
  
  ALTER TABLE nas ADD column `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE nas ADD column `address_street` varchar(100) NOT NULL default '';
  ALTER TABLE nas ADD column `address_build` varchar(10) NOT NULL default '';
  ALTER TABLE nas ADD column `address_flat` varchar(10) NOT NULL default '';
  ALTER TABLE nas ADD column `zip` varchar(7) NOT NULL default '';
  ALTER TABLE nas ADD column `city` varchar(20) NOT NULL default '';
  
  ALTER TABLE cards_users ADD column `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE cards_users DROP index serial;
  ALTER TABLE cards_users ADD KEY `serial` (`number`,`serial`, `domain_id`);
  
  
  ALTER TABLE cards_users ADD KEY `domain_id` (`domain_id`);
  ALTER TABLE cards_users ADD column `created` DATETIME NOT NULL;
  UPDATE cards_users SET created=datetime;
  
  ALTER TABLE cards_bruteforce ADD column `domain_id` smallint(6) unsigned not null default 0;
  
  CREATE TABLE `domains` (
    `id` SMALLINT(6) UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(30) NOT NULL DEFAULT '',
    `comments` TEXT NOT NULL,
    `created` DATE NOT NULL,
    `state` TINYINT(1) UNSIGNED NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`),
    UNIQUE KEY `name` (`name`)
  )  COMMENT='Domains List';
  
  ALTER TABLE intervals add column new_tp_id smallint unsigned not null default 0;
  UPDATE intervals, tarif_plans SET intervals.new_tp_id=tarif_plans.tp_id
  WHERE intervals.tp_id=tarif_plans.id;
  ALTER TABLE  intervals drop KEY tp_intervals;
  DELETE from intervals WHERE new_tp_id=0;
  UPDATE intervals SET intervals.tp_id=new_tp_id;
  ALTER TABLE intervals add UNIQUE KEY `tp_intervals` (`tp_id`, `begin`, `day`);
  ALTER TABLE intervals drop column new_tp_id;
  DELETE FROM tp_nas;  
  
  CREATE TABLE `traffic_classes` (
    `id` SMALLINT(6) UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(25) COLLATE latin1_swedish_ci NOT NULL DEFAULT '',
    `nets` TEXT COLLATE latin1_swedish_ci,
    `comments` TEXT COLLATE latin1_swedish_ci NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`),
    UNIQUE KEY `name` (`name`)
   ) COMMENT='Traffic Classes';
  
  INSERT INTO traffic_classes (name, nets) VALUES ('Global', '0.0.0.0/0');
  
  ALTER TABLE trafic_tarifs ADD COLUMN `net_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0';
  
  CREATE TABLE `sqlcmd_history` (
    `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    `datetime` DATETIME NOT NULL,
    `aid` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0',
    `sql_query` TEXT NOT NULL,
    `db_id` TINYINT(4) UNSIGNED NOT NULL DEFAULT '0',
    `comments` TEXT NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`),
    KEY `aid` (`aid`)
  ) COMMENT='Sqlcmd history';
  
  ALTER TABLE cards_dillers ADD COLUMN `tp_id` SMALLINT(6) UNSIGNED NOT NULL DEFAULT '0';
  
  CREATE TABLE `dillers_tps` (
    `id` SMALLINT(6) UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) COLLATE latin1_swedish_ci NOT NULL DEFAULT '',
    `payment_type` TINYINT(2) UNSIGNED NOT NULL DEFAULT '0',
    `percentage` TINYINT(3) UNSIGNED NOT NULL DEFAULT '0',
    `operation_payment` DOUBLE(14,2) UNSIGNED NOT NULL DEFAULT '0.00',
    `activate_price` DOUBLE(14,2) UNSIGNED NOT NULL DEFAULT '0.00',
    `change_price` DOUBLE(14,2) UNSIGNED NOT NULL DEFAULT '0.00',
    `credit` DOUBLE(10,2) UNSIGNED NOT NULL DEFAULT '0.00',
    `min_use` DOUBLE(14,3) UNSIGNED NOT NULL DEFAULT '0.000',
    `payment_expr` VARCHAR(240) COLLATE latin1_swedish_ci NOT NULL DEFAULT '',
    `nas_count` SMALLINT(6) UNSIGNED NOT NULL DEFAULT 0,
    `tp_counts` SMALLINT(6) UNSIGNED NOT NULL DEFAULT 0,
    PRIMARY KEY (`id`),
    UNIQUE KEY `id` (`id`),
    UNIQUE KEY `name` (`name`)
   ) COMMENT='Resellers Tarif Plans';
  
  ALTER TABLE tarif_plans ADD COLUMN `total_time_limit` INTEGER(11) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE tarif_plans ADD COLUMN `total_traf_limit` INTEGER(11) UNSIGNED NOT NULL DEFAULT '0';
  
  ALTER TABLE nas ADD COLUMN`gid` smallint(6) unsigned NOT NULL default 0;
  
  CREATE TABLE `nas_groups` (
    `id` int(10) unsigned NOT NULL auto_increment,
    `name` varchar(40) NOT NULL default '',
    `comments` text not null,
    `disable` tinyint(6) unsigned NOT NULL default '0',
    `domain_id` smallint(6) unsigned not null default 0,
    PRIMARY KEY  (`id`),
    UNIQUE KEY `domain_id` (`domain_id`,`name`)
  ) COMMENT='Nas servers groups';
  
  ALTER TABLE companies ADD COLUMN `representative` VARCHAR(120) NOT NULL DEFAULT '';
  
  ALTER TABLE docs_acct ADD COLUMN `payment_id` int(11) unsigned NOT NULL default 0;
  ALTER TABLE docs_acct ADD COLUMN `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE docs_acct ADD KEY `payment_id` (`payment_id`);
  ALTER TABLE docs_acct ADD KEY `domain_id` (`domain_id`);
  ALTER TABLE docs_invoice ADD COLUMN `payment_id` int(11) unsigned NOT NULL default 0;
  ALTER TABLE docs_invoice ADD COLUMN `domain_id` smallint(6) unsigned not null default 0;
  ALTER TABLE docs_invoice ADD KEY `payment_id` (`payment_id`);
  ALTER TABLE docs_invoice ADD KEY `domain_id` (`domain_id`);
  CREATE TABLE `docs_tax_invoices` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `date` date NOT NULL DEFAULT '0000-00-00',
    `created` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
    `tax_invoice_id` int(10) unsigned NOT NULL DEFAULT '0',
    `uid` int(11) unsigned NOT NULL DEFAULT '0',
    `aid` smallint(6) unsigned NOT NULL DEFAULT '0',
    `vat` double(5,2) unsigned NOT NULL DEFAULT '0.00',
    `company_id` int(11) unsigned NOT NULL DEFAULT '0',
    `domain_id` smallint(6) unsigned not null default 0,
    PRIMARY KEY (`id`),
    UNIQUE KEY `date` (`date`,`company_id`),
    KEY `domain_id` (`domain_id`)
  ) COMMENT='Docs Tax Invoices';  
    
  ALTER TABLE nas ADD COLUMN `country` tinyint(6) unsigned NOT NULL default '0';
  ALTER TABLE nas ADD COLUMN `mac` varchar(17) NOT NULL default '';
  ALTER TABLE nas ADD COLUMN `changed` datetime NOT NULL default '0000-00-00 00:00:00';
  
  ALTER TABLE abon_user_list ADD COLUMN `comments` VARCHAR(240) COLLATE cp1251_general_ci NOT NULL DEFAULT '';
  ALTER TABLE abon_user_list ADD KEY `uid` (`uid`, `tp_id`);
  ALTER TABLE abon_tariffs CHANGE COLUMN name `name` varchar(100) NOT NULL default '';
  ALTER TABLE abon_tariffs ADD COLUMN `ext_bill_account` tinyint(1) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE abon_tariffs ADD COLUMN `nonfix_period` tinyint(1) unsigned NOT NULL DEFAULT '0';
  UPDATE tarif_plans SET module='Dv' WHERE module='';
  ALTER TABLE `admins` ADD COLUMN min_search_chars tinyint(2) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE `admins` ADD COLUMN max_rows smallint(6) unsigned NOT NULL DEFAULT '0';
  ALTER TABLE `ippools` ADD COLUMN static tinyint(6) unsigned NOT NULL DEFAULT '0';
  UPDATE dv_main SET CID='ANY' WHERE CID='0';
  
  CREATE TABLE `docs_acts` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `date` date NOT NULL DEFAULT '0000-00-00',
    `created` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
    `act_id` int(10) unsigned NOT NULL DEFAULT '0',
    `uid` int(11) unsigned NOT NULL DEFAULT '0',
    `aid` smallint(6) unsigned NOT NULL DEFAULT '0',
    `vat` double(5,2) unsigned NOT NULL DEFAULT '0.00',
    `company_id` int(11) unsigned NOT NULL DEFAULT '0',
    `domain_id` smallint(6) unsigned not null default 0,
    `sum` double(10,2) unsigned NOT NULL default '0.00',
    PRIMARY KEY (`id`),
    UNIQUE KEY `date` (`date`,`company_id`),
    KEY `domain_id` (`domain_id`)
  ) COMMENT='Docs Acts';
  
  ALTER TABLE nas_groups ADD COLUMN `default` TINYINT(1) UNSIGNED NOT NULL DEFAULT '0';
  ALTER TABLE nas_groups ADD COLUMN `main_page` VARCHAR(120) NOT NULL DEFAULT '';
  ALTER TABLE tarif_plans ADD COLUMN `priority` tinyint(1) unsigned NOT NULL  DEFAULT '0';
  ALTER TABLE users_pi ADD COLUMN `contract_sufix` VARCHAR(5) NOT NULL DEFAULT '';